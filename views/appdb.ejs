<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/appdb.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
    <div class="video-bg">
        <!-- <video width="320" height="240" autoplay loop muted>
         <source src="https://assets.codepen.io/3364143/7btrrd.mp4" type="video/mp4">
       Your browser does not support the video tag.
       </video> -->
       </div>
       <div class="dark-light">
           <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" /></svg>
          </div>
       <div class="app">
        <div class="header">
         <div class="menu-circle"></div>
         <div class="header-menu">
          <!-- <a class="menu-link is-active" href="#">Department-1</a> -->
       <!--    <a class="menu-link notify" href="#">Your work</a>
          <a class="menu-link" href="#">Discover</a>
          <a class="menu-link notify" href="#">Market</a> -->
         </div>
         <% var c=0; %>
         <div class="header-profile">
          <div class="notification" style="color: aliceblue;"><%= email %>
           <span class="notification-number" id="cval" title="Pendibg Approvals"><%= c %></span>
           <svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">
            <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0" />
           </svg>
          </div>
          <!-- <svg viewBox="0 0 512 512" fill="currentColor">
           <path d="M448.773 235.551A135.893 135.893 0 00451 211c0-74.443-60.557-135-135-135-47.52 0-91.567 25.313-115.766 65.537-32.666-10.59-66.182-6.049-93.794 12.979-27.612 19.013-44.092 49.116-45.425 82.031C24.716 253.788 0 290.497 0 331c0 7.031 1.703 13.887 3.006 20.537l.015.015C12.719 400.492 56.034 436 106 436h300c57.891 0 106-47.109 106-105 0-40.942-25.053-77.798-63.227-95.449z" />
          </svg> -->
          <a href="/userlogout" title="Logout">
          <img class="profile-img" src="https://e7.pngegg.com/pngimages/918/229/png-clipart-computer-icons-login-logo-logout-emblem-trademark-thumbnail.png" alt="">
        </a> 
        </div>
        </div>
        <div class="wrapper">
            
         <div class="main-container">
          <div class="main-header">
           <div class="header-menu">
            <!-- <a class="main-header-link is-active" href="#">Desktop</a> -->
            <a class="main-header-link " style="color: aliceblue;" href="#"><%= dept %></a>
            <a class="main-header-link " style="color: aliceblue;" href="#"><%= role %> List</a>

        </div>
          </div>
          
          <div class="content-wrapper">
            
           <div class="content-wrapper-header">
            <div class="content-wrapper-context">
             <h3 class="img-content">
              <svg viewBox="0 0 512 512">
               <path d="M467 0H45C20.099 0 0 20.099 0 45v422c0 24.901 20.099 45 45 45h422c24.901 0 45-20.099 45-45V45c0-24.901-20.099-45-45-45z" fill="#d6355b" data-original="#ff468c" />
               <path xmlns="http://www.w3.org/2000/svg" d="M512 45v422c0 24.901-20.099 45-45 45H256V0h211c24.901 0 45 20.099 45 45z" fill="#d6355b" data-original="#d72878" />
               <path xmlns="http://www.w3.org/2000/svg" d="M467 30H45c-8.401 0-15 6.599-15 15v422c0 8.401 6.599 15 15 15h422c8.401 0 15-6.599 15-15V45c0-8.401-6.599-15-15-15z" fill="#2e000a" data-original="#700029" />
               <path xmlns="http://www.w3.org/2000/svg" d="M482 45v422c0 8.401-6.599 15-15 15H256V30h211c8.401 0 15 6.599 15 15z" fill="#2e000a" data-original="#4d0e06" />
               <path xmlns="http://www.w3.org/2000/svg" d="M181 391c-41.353 0-75-33.647-75-75 0-8.291 6.709-15 15-15s15 6.709 15 15c0 24.814 20.186 45 45 45s45-20.186 45-45-20.186-45-45-45c-41.353 0-75-33.647-75-75s33.647-75 75-75 75 33.647 75 75c0 8.291-6.709 15-15 15s-15-6.709-15-15c0-24.814-20.186-45-45-45s-45 20.186-45 45 20.186 45 45 45c41.353 0 75 33.647 75 75s-33.647 75-75 75z" fill="#d6355b" data-original="#ff468c" />
               <path xmlns="http://www.w3.org/2000/svg" d="M391 361h-30c-8.276 0-15-6.724-15-15V211h45c8.291 0 15-6.709 15-15s-6.709-15-15-15h-45v-45c0-8.291-6.709-15-15-15s-15 6.709-15 15v45h-15c-8.291 0-15 6.709-15 15s6.709 15 15 15h15v135c0 24.814 20.186 45 45 45h30c8.291 0 15-6.709 15-15s-6.709-15-15-15z" fill="#d6355b" data-original="#d72878" />
              </svg>
              Hey <%= name %>,
             </h3>
             <div class="content-text">With a simple click, you can accept or decline an approval request. The interface allows you to quickly navigate through requests and select the appropriate action.</div>
             <!-- <button class="content-button">Start free trial</button> -->
            </div>
            <img class="content-wrapper-img" src="https://assets.codepen.io/3364143/glass.png" alt="">
           </div>
           <div class="content-section">
            <div class="content-section-title">Pending Approvals</div>
            <div class="apps-card">
              <% for(let i=1;i<=data.length;i++){ %>
                
                <% if((role === "Supervisor" && (data[i-1].supStatus==='' || data[i-1].supStatus===undefined)) || (role === "HOD" && (data[i-1].hodStatus==='' || data[i-1].hodStatus===undefined) && (data[i-1].supStatus==="approved")) || (role === "Security" && (data[i-1].secStatus===''||data[i-1].secStatus===undefined) && (data[i-1].hodStatus==='approved') && (data[i-1].supStatus==='approved'))) {%>
                    <div class="app-card">
                      <% c++; %>
                      <script>
                        document.addEventListener("DOMContentLoaded", function() {
                          let cv = "<%= c %>";
                          document.getElementById("cval").innerText = cv;
                        });
                       </script>
              <span>
               <svg viewBox="0 0 512 512" style="border: 1px solid #a059a9">
                <path xmlns="http://www.w3.org/2000/svg" d="M480 0H32C14.368 0 0 14.368 0 32v448c0 17.664 14.368 32 32 32h448c17.664 0 32-14.336 32-32V32c0-17.632-14.336-32-32-32z" fill="#210027" data-original="#7b1fa2" />
                <g xmlns="http://www.w3.org/2000/svg">
                 <path d="M192 64h-80c-8.832 0-16 7.168-16 16v352c0 8.832 7.168 16 16 16s16-7.168 16-16V256h64c52.928 0 96-43.072 96-96s-43.072-96-96-96zm0 160h-64V96h64c35.296 0 64 28.704 64 64s-28.704 64-64 64zM400 256h-32c-18.08 0-34.592 6.24-48 16.384V272c0-8.864-7.168-16-16-16s-16 7.136-16 16v160c0 8.832 7.168 16 16 16s16-7.168 16-16v-96c0-26.464 21.536-48 48-48h32c8.832 0 16-7.168 16-16s-7.168-16-16-16z" fill="#f6e7fa" data-original="#e1bee7" />
                </g>
               </svg>
               <%= data[i-1].gpid %>
              </span>
              <div class="app-card__subtext"><%= data[i-1].name %><br>Requestor: <%= data[i-1].requestor %><br>Email: <%= data[i-1].email %></div>
              <div class="app-card-buttons">
               <a href="/approve/<%= data[i-1].email %>/<%= data[i-1].dref %>"><button class="content-button status-button">Update</button></a>
               <!-- <div class="menu"></div> -->
              </div>
             </div>
             <% } %>
            <% } %>
            </div>
           </div>
           <div class="content-section">
            <div class="content-section-title">Checked & Verified</div>
            <ul>
              <% for(let i=1;i<=data.length;i++){ %>
                <% if((role === "Supervisor" && (data[i-1].supStatus!=='' && data[i-1].supStatus!==undefined)) || (role === "HOD" && (data[i-1].hodStatus!=='' && data[i-1].hodStatus!==undefined) && (data[i-1].supStatus!=='' &&data[i-1].supStatus!==undefined)) || role === "Security" && (data[i-1].secStatus!==''&&data[i-1].secStatus!==undefined) && (data[i-1].hodStatus!=='' &&data[i-1].hodStatus!==undefined) && (data[i-1].supStatus!=='' && data[i-1].supStatus!==undefined)) {%>
                  <% if(role === "Supervisor"){stat = data[i-1].supStatus;} %>
                  <% if(role === "HOD"){stat = data[i-1].hodStatus;} %>
                  <% if(role === "Security"){stat = data[i-1].secStatus;} %>
                <li class="adobe-product">
                  <div class="products">
                  <svg viewBox="0 0 52 52" style="border:1px solid #3291b8">
                    <g xmlns="http://www.w3.org/2000/svg">
                    <path d="M40.824 52H11.176C5.003 52 0 46.997 0 40.824V11.176C0 5.003 5.003 0 11.176 0h29.649C46.997 0 52 5.003 52 11.176v29.649C52 46.997 46.997 52 40.824 52z" fill="#061e26" data-original="#393687" />
                    <path d="M12.16 39H9.28V11h9.64c2.613 0 4.553.813 5.82 2.44 1.266 1.626 1.9 3.76 1.9 6.399 0 .934-.027 1.74-.08 2.42-.054.681-.22 1.534-.5 2.561-.28 1.026-.66 1.866-1.14 2.52-.48.654-1.213 1.227-2.2 1.72-.987.494-2.16.74-3.52.74h-7.04V39zm0-12h6.68c.96 0 1.773-.187 2.44-.56.666-.374 1.153-.773 1.46-1.2.306-.427.546-1.04.72-1.84.173-.801.267-1.4.28-1.801.013-.399.02-.973.02-1.72 0-4.053-1.694-6.08-5.08-6.08h-6.52V27zM29.48 33.92l2.8-.12c.106.987.6 1.754 1.48 2.3.88.547 1.893.82 3.04.82s2.14-.26 2.98-.78c.84-.52 1.26-1.266 1.26-2.239s-.36-1.747-1.08-2.32c-.72-.573-1.6-1.026-2.64-1.36-1.04-.333-2.086-.686-3.14-1.06a7.36 7.36 0 01-2.78-1.76c-.987-.934-1.48-2.073-1.48-3.42s.54-2.601 1.62-3.761 2.833-1.739 5.26-1.739c.854 0 1.653.1 2.4.3.746.2 1.28.394 1.6.58l.48.279-.92 2.521c-.854-.666-1.974-1-3.36-1-1.387 0-2.42.26-3.1.78-.68.52-1.02 1.18-1.02 1.979 0 .88.426 1.574 1.28 2.08.853.507 1.813.934 2.88 1.28 1.066.347 2.126.733 3.18 1.16 1.053.427 1.946 1.094 2.68 2s1.1 2.106 1.1 3.6c0 1.494-.6 2.794-1.8 3.9-1.2 1.106-2.954 1.66-5.26 1.66-2.307 0-4.114-.547-5.42-1.64-1.307-1.093-1.987-2.44-2.04-4.04z" fill="#c1dbe6" data-original="#89d3ff" />
                    </g>
                  </svg>
                  <%= data[i-1].gpid %>
                  </div>
                  <span class="status">
                  <span class="status-circle green"></span>
                  <%= stat %></span>
                  <div class="button-wrapper">
                  <a href="/showstatus/<%= data[i-1].email %>/<%= data[i-1].dref %>/0"><button class="content-button status-button open">Open</button></a>
                  <!-- <div class="menu">
                    <button class="dropdown">
                    <ul>
                      <li><a href="#">Go to Discover</a></li>
                      <li><a href="#">Learn more</a></li>
                      <li><a href="#">Uninstall</a></li>
                    </ul>
                    </button>
                  </div> -->
                  </div>
                </li>
                <% } %>
                <% } %>
            </ul>
           </div>
           
          </div>
         </div>
        </div>
        <div class="overlay-app"></div>
       </div>
</body>
<script src="/js/appdb.js"></script>

</html>